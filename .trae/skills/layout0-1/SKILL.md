---
name: layout-generator
description: 根据 UI 设计图或自然语言描述，自动生成 Vue 项目的布局基础代码（Layout 基建）。
---

# Layout Generator Skill Instructions

## Purpose

本技能用于**自动生成前端项目的布局基础代码（Layout 基建）**，帮助开发者快速搭建项目框架，适用于大屏可视化、管理系统及混合布局场景。

> ⚠️ **核心原则：严格遵循 UI 设计图或自然语言描述**
> 
> 本技能的所有布局生成必须**严格按照用户提供的 UI 设计图或自然语言描述**来实现。文档中的规范和示例仅作为**默认参考值**，当用户有明确指定时，必须以用户需求为准。

---

## When to use

- 用户上传 UI 设计图并要求生成布局代码
- 用户通过自然语言描述布局需求（如"顶部导航 + 左右侧边栏 + 中间 3D 场景"）
- 新项目初始化，需要快速搭建 Layout 框架
- 用户明确提出"生成布局 / 创建 Layout / 搭建页面框架"

---

## ⚠️ 严格遵循原则（最高优先级）

### 1. UI 设计图优先

- ✅ **所有布局比例、卡片高度、区域划分必须按照 UI 设计图测量**
- ✅ **颜色、字体、间距等视觉细节必须还原 UI 设计**
- ❌ **禁止**使用默认值覆盖 UI 设计图中的明确设计

### 2. 自然语言描述优先

- ✅ **用户通过自然语言描述的布局需求具有最高优先级**
- ✅ **当用户描述与文档规范冲突时，以用户描述为准**
- ✅ **如描述不明确，应主动询问确认**

### 3. 默认规范仅为参考

- ✅ 文档中的样式规范、比例示例仅在用户**未明确指定**时作为默认值
- ✅ 生成代码前需确认用户的具体需求
- ❌ **禁止**未经确认就使用默认值替代用户需求

---

## Input Types

### 1. UI 设计图输入

当用户上传设计稿（jpg / png / figma 截图）时，需要自动识别：

- 页面区域划分（Header / Footer / Sidebar / Main / Scene）
- 各区域内部的布局结构和元素分布（左中右 / 上下 / 网格等）
- 区域尺寸比例（百分比或像素）
- 布局类型（固定布局 / 响应式）
- 整体视觉风格（科技风 / 商务风等）
- 各区域的具体内容元素（Logo、导航、时间、按钮等）及其位置

### 2. 自然语言输入

从描述中提取以下关键信息：

- 各区域的具体内容描述（例如："Header 左侧显示 Logo 和标题，右侧显示用户信息"）
- 元素的排列方式和位置关系
- 布局类型（大屏可视化 / 管理系统 / 混合布局）
- 区域结构与比例
- 是否包含 3D 场景、工具栏、卡片区等特殊区域

---

## Generation Procedure（必须遵守）

### Step 1：需求分析

1. **识别布局类型**

   - 大屏可视化：固定分辨率、全屏展示、数据密集
   - 管理系统：响应式、侧边栏菜单、内容区滚动
   - 混合布局：大屏 + 3D 场景 / 多模式切换

2. **提取区域配置**

   - 必选：Header、Main
   - 可选：Footer、左/右 Sidebar、Scene、ToolBar
   - 尺寸：百分比 / 固定像素 / aspect-ratio

3. **识别特殊需求**
   - 3D 场景（UE / Three.js / WDP）
   - 是否需要动画、主题切换
   - 是否需要工具栏（顶部 / 底部 / 侧边）
   - 若 UI 图中满足以下任一条件，则自动推断存在侧边工具栏：
     - 在侧边栏与中间主区域之间存在一组纵向排列的图标按钮
     - 在 3D 场景边缘存在悬浮操作按钮组
     - 图标数量 ≥ 3，且垂直分布

---

### Step 2：组件设计

#### 必须生成的核心组件

1. `src/layout/index.vue`

   - 主布局容器
   - 使用 absolute 定位（大屏）
   - 提供完整插槽体系
   - 使用 props 控制区域显隐

   **插槽必须支持：**

   - header
   - footer
   - aside-left / aside-right
   - aside-left-tools / aside-right-tools
   - header-tool / footer-tool
   - scene
   - 默认插槽（主内容区）

2. `src/layout/header.vue`

   - 根据 UI 设计图或用户描述还原 Header 布局结构
   - 支持左中右三栏布局（可按需调整）
   - 常见元素包括但不限于：
     - Logo / 标题
     - 日期 / 时间 / 天气
     - 导航菜单
     - 场景切换器 / 下拉选择器
     - 用户信息 / 退出登录
   - 必须使用插槽支持自定义内容
   - ❌ **禁止**设置独立背景色或 `backdrop-filter`，保持透明

3. `src/layout/footer.vue`（如需要）

   - 根据 UI 设计图或用户描述还原 Footer 布局结构
   - **导航按钮样式**（重要 ⚠️）：
     - **胶囊状按钮**：`border-radius: 25px`
     - **横向布局**：图标 + 文字横向排列
     - 背景：`rgba(0, 30, 60, 0.8)` + 边框发光效果
     - 激活态：渐变背景 + 内外阴影
     - 最小宽度：120px
   - 常见元素包括但不限于：
     - 页面切换 / 导航按钮
     - 版权信息 / 备案号
     - 联系方式 / 社交媒体链接
     - 统计信息 / 状态指示器
   - 支持激活态管理（如有导航功能）
   - 必须使用插槽支持自定义内容
   - ❌ **禁止**设置独立背景色，保持透明

4. `src/layout/box.vue`（大屏卡片）

   - **仅单标题**（根据 UI 图实际情况决定是否需要英文副标题）
   - 装饰元素：四角标 + 顶部三点装饰
   - 内容区自适应
   - 背景色：深色半透明 `rgba(5, 25, 45, 0.85)`
   - 边框色：蓝色调 `rgba(40, 120, 180, 0.5)`
   - **渐进动画系统**：
     - `delayTime`：延迟显示时间（毫秒），实现分批入场效果
     - `position`：入场方向（left/right）
       - `left`：从左侧滑入，适用于左侧边栏
       - `right`：从右侧滑入，适用于右侧边栏
     - 动画实现：Vue transition + CSS transform translateX
     - 过渡时长：0.6s ease
     - ⚠️ **Vue 版本适配**：
       - Vue 2：使用 `-enter` / `-enter-active` / `-enter-to`
       - Vue 3：使用 `-enter-from` / `-enter-active` / `-enter-to`
       - 必须根据项目 Vue 版本使用正确的类名

5. `src/layout/scene.vue`（如包含 3D）

- 提供 WDP API / 3D 场景集成代码骨架
- 不写具体业务逻辑
- 默认铺满整个父容器 / 页面：
- 使用 `position: absolute; top: 0; left: 0; width: 100%; height: 100%;`
- 避免受其他区域布局影响
- 根据 UI 设计图或用户描述，按需生成以下组件：
- 导航项组件（Nav Item）
  - 按钮组件（Button）
  - 工具栏组件（Toolbar）
- 其他自定义组件

**关键原则**：

- 所有组件的内容和布局必须根据实际需求生成
- 使用插槽系统确保组件的灵活性和可扩展性
- 避免在组件中硬编码特定的内容或位置
- 底部导航项组件
- 工具栏组件（headerTool / footerTool）

---

#### 辅助组件

6. **`src/components/header/`** - 顶部相关组件

   - `navItem-header.vue`：顶部导航项
   - `navItem-footer.vue`：底部导航项
   - `setting/weather.vue`：天气组件
   - `setting/date.vue`：日期组件
   - `setting/selections.vue`：选择器组件

7. **`src/components/toolBar/`** - 工具栏组件（重要 ⚠️）

   - **`headerTool.vue`** - 顶部工具组件
     - Props：headerToolsItemData（icon、title、content）
     - 动态背景图：告警类文字使用红色背景，其他使用蓝色背景
     - Flex 布局：图标 + 文字容器
     - 位置：水平居中，宽度 42%，顶部 9%
   - **`footerTool.vue`** - 底部工具组件
     - 类似 headerTool 实现
     - 位置：水平居中，宽度 42%，底部 8%

8. **侧边工具栏规范**（aside-left-tools / aside-right-tools）⚠️
   - **可选配置**：单边或双边均可，根据实际需求灵活配置
   - **位置定位**：位于侧边栏外侧与中间场景之间，靠近底部
   - **定位计算**：
     - 水平：left/right = 侧边栏宽度 + 间距（如 20px）
     - 垂直：bottom = 底部导航栏高度 + 间距（如有导航栏），否则直接靠底部
   - **布局方式**：垂直排列，flex-direction: column，gap 间距 12px
   - **使用场景**：放置工具按钮组（图层切换、测量工具、视角控制等）
   - **层级**：z-index: 50
   - **灵活性**：位置可根据自然语言输入调整（如"工具栏靠中间"则改用 top: 50%）

### Step 3：样式与布局规范

#### 布局策略（大屏推荐）

- 使用 `position: absolute`
- 百分比控制区域高度与宽度
- 禁止使用滚动布局替代结构布局

#### 背景与蒙版规范 ⚠️

**整体页面背景策略**：

- ✅ 在最外层容器（layout-container）添加统一背景蒙版
- ✅ 使用 `radial-gradient` 实现径向渐变蒙版效果
- ✅ 参考配置：`radial-gradient(circle at center, rgba(0, 20, 40, 0.7), rgba(0, 10, 25, 0.85))`
- ❌ **禁止**给 Header / Footer / Scene 单独设置 `background` 或 `backdrop-filter`
- ❌ **禁止**给各个区域设置独立的背景色，保持透明让整体蒙版透出
- ✅ 仅 Box 卡片组件可设置背景色（深色半透明）

**Box 组件背景规范**：

- ✅ 使用深色半透明背景：`rgba(5, 25, 45, 0.85)`
- ✅ 边框颜色偏蓝色调：`rgba(40, 120, 180, 0.5)`
- ✅ 标题区域可添加更深的背景层：`rgba(0, 15, 30, 0.3)`
- ❌ 避免使用过亮或过透明的背景，影响内容可读性

#### CSS 变量规范

- 布局尺寸必须使用 CSS 变量
- 颜色、字体、背景必须可配置
- 所有样式使用 SCSS

---

## 🎨 UI 还原关键要点

### ⚠️ 核心原则：严格遵循 UI 设计图或自然语言描述

> **最高优先级原则**：所有布局、样式、比例必须严格按照用户提供的 UI 设计图或自然语言描述来实现。以下规范仅作为**默认参考**，当用户有明确指定时，必须以用户需求为准。

### 1. Box 卡片组件设计

**标题规范**：

- ❌ **不需要**英文副标题（根据实际 UI 图判断）
- ✅ 仅保留中文主标题，简洁清晰
- ✅ 标题字号：16px，字重：500
- ✅ 标题颜色：`rgba(255, 255, 255, 0.95)`

**Box 卡片占比**：

- 根据 UI 图实际视觉占比分配
- 左侧示例：小卡片 30% + 大卡片 70%
- 右侧示例：小卡片 30% + 中卡片 35% + 中卡片 35%
- 使用 `flex: 0 0 XX%` 固定占比，避免使用 `flex: 1` 平均分配

### 2. 侧边栏卡片高度占比规范（重要 ⚠️）

**高度分配原则**：

- ✅ **必须严格按照 UI 设计图或自然语言描述的视觉占比分配卡片高度**
- ✅ 每个卡片使用**百分比高度**（如 `height: 19.3%`、`height: 27%`）
- ✅ 左右侧边栏所有卡片高度**加起来应约等于 85%-87%**（预留给间距和边距）
- ❌ **禁止**使用 `flex: 1` 让卡片平均分配高度
- ❌ **禁止**使用滚动条 `overflow-y: auto`

**样式写法规范**：

```scss
// 在页面视图组件的 <style> 中定义卡片高度
// 高度值必须根据 UI 设计图或自然语言描述确定
.content-left {
  .card-name-1 { height: XX%; }  // 根据 UI 占比
  .card-name-2 { height: XX%; }  // 根据 UI 占比
  .card-name-3 { height: XX%; }  // 根据 UI 占比
  // 所有高度加起来约等于 85%-87%
}

.content-right {
  .card-name-1 { height: XX%; }
  .card-name-2 { height: XX%; }
  // 所有高度加起来约等于 85%-87%
}
```

**高度占比示例（仅供参考，实际以 UI 图为准）**：

| 页面类型 | 左侧布局示例 | 右侧布局示例 |
|---------|-------------|-------------|
| 4卡片布局 | 19% + 19% + 20% + 27% ≈ 85% | 13% + 22% + 24% + 26% ≈ 85% |
| 4卡片布局 | 24% + 21% + 19% + 21% ≈ 85% | 20% + 19% + 21% + 24% ≈ 84% |
| 4卡片布局 | 24% + 27% + 19% + 15% ≈ 85% | 33% + 30% + 28% ≈ 91%（3卡片） |

### 3. Footer 导航按钮样式

**胶囊状按钮设计**：

- ✅ 使用 `border-radius: 25px` 实现胶囊形状
- ✅ 图标与文字**横向排列**（`flex-direction: row`）
- ✅ 背景：深色半透明 `rgba(0, 30, 60, 0.8)`
- ✅ 边框：蓝色发光 `rgba(79, 195, 247, 0.4)`
- ✅ 激活态：渐变背景 + 内阴影 + 外阴影
- ✅ 最小宽度：120px，确保按钮视觉一致性
- ❌ **避免**使用纵向排列（column）+ 下划线的传统样式

### 4. 底部导航与路由对应关系（重要 ⚠️）

**路由结构规范**：

- ✅ 底部导航的每个按钮对应一个一级路由（如 `/page_1`、`/page_2`...）
- ✅ 路由配置在 `src/router/index.js` 中定义
- ✅ 导航数据在 `src/layout/footer.vue` 的 `navList` 数组中配置
- ✅ 每个导航项必须包含：`name`（显示名称）、`id`（唯一标识）、`isActive`（激活状态）、`path`（路由路径）

**导航项配置结构**：

```javascript
navList: [
  { name: "导航名称", id: 1, isActive: true, path: "/page_1" },
  { name: "导航名称", id: 2, isActive: false, path: "/page_2" },
  // ... 根据 UI 设计图或自然语言描述添加
]
```

**路由层级结构**：

```
/ (根路径)
├── /page_1 (一级页面模块)
│   ├── /page_1/1 (子页面)
│   └── /page_1/2 (子页面)
├── /page_2 (一级页面模块)
│   └── /page_2/1 (子页面)
└── ...（根据需求扩展）
```

**激活状态管理**：

- ✅ 通过 `$route.matched` 匹配当前路由，设置对应导航项的 `isActive` 为 `true`
- ✅ 点击导航时使用互斥逻辑，只有一个导航项处于激活状态

---

## 🚨 Critical Checklist（强制规则）

### 1. 资源引用

- ❌ 禁止引用任何不存在的图片 / 字体 / 视频
- ✅ 必须使用占位 div 替代
- ✅ 占位区域必须有明显视觉区分

### 2. 样式导入

- ❌ 禁止在 App.vue 中引用不存在的 scss
- ✅ 样式文件生成后，只允许在 main.js 中 import
- ✅ 默认使用 `sass` 预处理器

### 3. 侧边栏布局（必须遵守）

- ❌ 禁止左右侧边栏出现滚动条
- ❌ 禁止使用 `overflow-y: auto`
- ✅ 使用 flex + column + gap
- ✅ **卡片占比必须严格按照 UI 图或自然语言描述的实际视觉比例分配**
- ✅ 使用 `height: XX%` 百分比高度，所有卡片高度加起来约等于 85%-87%
- ❌ **禁止**所有卡片使用 `flex: 1` 平均分配高度
- ✅ 卡片内容区使用 `flex: 1` + `overflow: hidden`
- ⚠️ **如用户未明确指定比例，需主动询问或根据 UI 图测量**

### 4. 背景蒙版规范（新增 ⚠️）

- ✅ 整体页面在 layout-container 添加统一蒙版
- ✅ 使用径向渐变：`radial-gradient(circle at center, rgba(0, 20, 40, 0.7), rgba(0, 10, 25, 0.85))`
- ❌ **禁止**Header / Footer / Scene 设置独立背景色
- ❌ **禁止**使用 `backdrop-filter: blur()` 在各个区域
- ✅ 仅 Box 卡片可设置深色半透明背景

### 5. 路径规范

- ✅ 所有组件路径必须使用 `@/` 别名
- ❌ 禁止使用相对路径 `../`

### 6. Vue Props 声明规范

- ❌ 禁止使用 `withDefaults` 配合运行时对象声明的 `defineProps`
- ✅ 使用标准的运行时 props 声明，通过 `type` 和 `default` 属性设置默认值
- ⚠️ `withDefaults` 仅适用于 TypeScript 类型定义的 `defineProps`
- ✅ 确保所有 props 都有明确的 `type` 和 `default` 值

## 📋 执行流程（模型必须按顺序执行）

### Phase 1：预检查

- 检查 App.vue 是否存在错误样式引用
- 确认项目支持 SCSS

### Phase 2：文件生成

- Layout → Header / Footer → Box / Scene → 样式文件 → 示例页面
- 所有外部资源使用占位结构

### Phase 3：主入口更新

- 在 main.js 中引入全局布局样式
- 确保路由可正常渲染 Layout

### Phase 4：质量校验

- 无不存在资源引用
- 无侧边栏滚动
- 所有路径可解析
- 项目可直接运行

---

## 核心原则（不可违反）

1. **严格遵循 UI 设计图或自然语言描述**（最高优先级）
2. 永远不引用不存在的文件
3. 布局结构优先于视觉细节
4. 先分析，再生成代码
5. 所有区域必须可配置、可扩展
6. 生成的代码必须可直接运行
7. **卡片高度占比必须按照用户指定或 UI 测量值分配，禁止随意使用默认值**
8. **底部导航路由配置必须与用户需求一致**
